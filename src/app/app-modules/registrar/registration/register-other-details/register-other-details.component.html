<div [formGroup]="otherDetailsForm">
  <div class="panel-body">
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.fatherName }}"
            allowText="alphaspace"
            formControlName="fatherName"
            maxlength="50"
            required />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.motherName }}"
            allowText="alphaspace"
            formControlName="motherName"
            maxlength="50" />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            validateEmail
            placeholder="
          {{ currentLanguageSet?.ro?.otherInfo?.emailID }}"
            formControlName="emailID" />
          <mat-error *ngIf="!otherDetailsForm.controls['emailID'].valid">
            {{ currentLanguageSet?.ro?.otherInfo?.emailID }}</mat-error
          >
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="select-container">
          <mat-form-field>
            <mat-label>{{
              currentLanguageSet?.ro?.otherInfo?.community
            }}</mat-label>
            <mat-select
              class="p-t-12"
              [style.width]="'100%'"
              formControlName="community"
              required
              (change)="onCommunityChanged()">
              <mat-option
                *ngFor="let community of masterData?.communityMaster"
                [value]="community.communityID">
                {{ community.communityType }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.bankName }}"
            allowText="alphaspace"
            maxLength="100"
            formControlName="bankName" />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.branchName }}"
            allowText="alphanumericspace"
            maxLength="100"
            formControlName="branchName" />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.accountNo }}."
            allowText="number"
            maxLength="20"
            formControlName="accountNo" />
        </mat-form-field>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <mat-form-field [style.width]="'100%'">
          <input
            autocomplete="off"
            matInput
            placeholder="{{ currentLanguageSet?.ro?.otherInfo?.ifscCode }}"
            maxLength="15"
            allowText="alphanumeric"
            formControlName="ifscCode" />
        </mat-form-field>
      </div>
      <div class="clearfix"></div>
      <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="select-container">
          <mat-form-field>
            <mat-label>{{
              currentLanguageSet?.ro?.otherInfo?.religion
            }}</mat-label>
            <mat-select
              class="p-t-12"
              [style.width]="'100%'"
              formControlName="religion"
              (change)="getReligionName()">
              <mat-option
                *ngFor="let religion of masterData?.religionMaster"
                [value]="religion.religionID">
                {{ religion.religionType | titlecase }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div
        *ngIf="otherDetailsForm.value.religion === '7'"
        class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
        <div class="select-container">
          <mat-form-field [style.width]="'100%'">
            <input
              autocomplete="off"
              matInput
              placeholder="{{
                currentLanguageSet?.ro?.otherInfo?.otherReligion
              }}"
              allowText="alphaspace"
              [required]="true"
              formControlName="religionOther"
              maxlength="50" />
          </mat-form-field>
        </div>
      </div>
      <span class="clearfix"></span>
      <!-- NEW ID DETAILS for BENEFICIARY -->
      <section class="mleft15">
        <section
          class="col-xs-12 col-sm-6 col-md-6 col-lg-6 mtop20"
          formArrayName="govID">
          <!-- Gov IDs-->
          <section
            *ngFor="
              let id of getGovIDControls();
              let i = index;
              let isLast = last
            "
            class="row">
            <ng-container [formGroupName]="i">
              <mat-label>{{
                currentLanguageSet?.ro?.otherInfo?.govtIDType
              }}</mat-label>
              <mat-select
                class="p-t-12"
                [style.width]="'40%'"
                (change)="filtergovIDs(id.value.type, i)"
                formControlName="type"
                style="line-height: unset">
                <mat-option
                  *ngFor="let govIDType of govIDMaster[i]?.govIdEntityMaster"
                  [value]="govIDType.govtIdentityTypeID">
                  {{ govIDType.identityType }}
                </mat-option>
              </mat-select>
              <mat-form-field
                [style.width]="'35%'"
                style="line-height: unset"
                class="mleft15">
                <input
                  autocomplete="off"
                  matInput
                  placeholder="{{
                    currentLanguageSet?.ro?.otherInfo?.govtIDNumber
                  }}"
                  [pattern]="
                    otherDetailsForm.controls['govID'].value[i].pattern
                  "
                  allowText="otherDetailsForm.get('govID')?.value[i].allow"
                  formControlName="idValue"
                  [minlength]="
                    otherDetailsForm.controls['govID'].value[i].minLength
                  "
                  [maxlength]="
                    otherDetailsForm.controls['govID'].value[i].maxLength || 20
                  "
                  [readonly]="
                    otherDetailsForm.controls['govID'].value[i].type === null
                  "
                  [required]="
                    otherDetailsForm.controls['govID'].value[i].type !== null
                  "
                  (blur)="
                    checkPattern(i, otherDetailsForm.controls['govID'].value[i])
                  " />
              </mat-form-field>
              <button
                md-mini-fab
                *ngIf="
                  otherDetailsForm.get('govID')?.value.length > 1 ||
                  otherDetailsForm.controls['govID']?.value[i].type
                "
                color="warn"
                (click)="removeID(1, i)">
                <mat-icon class="md-18" aria-label="Remove ID">close</mat-icon>
              </button>
              <span *ngIf="i < govLength - 1">
                <button
                  md-mini-fab
                  color="primary"
                  *ngIf="isLast"
                  [disabled]="
                    !otherDetailsForm.controls['govID'].value[i].idValue
                  "
                  (click)="addID(1, i)">
                  <mat-icon class="md-18" aria-label="Add ID">add</mat-icon>
                </button>
              </span>
              <div style="float: right; width: 55%">
                <mat-error class="govid-msg" *ngIf="id.value.type === 3">
                  ((otherDetailsForm.get('govID')?.value[i]?.idValue?.length <
                  otherDetailsForm.get('govID')?.value[i]?.minLength) ||
                  otherDetailsForm.get('govID')?.value[i]?.idValue?.invalid) " >
                  {{
                    otherDetailsForm.get('govID')?.value[i]?.error
                  }}</mat-error
                >
                <mat-error
                  class="govid-msg"
                  *ngIf="
                    id.value.type !== 3 &&
                    (otherDetailsForm.get('govID')?.value[i]?.idValue?.length <
                      otherDetailsForm.get('govID')?.value[i]?.maxLength ||
                      otherDetailsForm.get('govID')?.value[i]?.idValue?.invalid)
                  ">
                  {{
                    otherDetailsForm.get('govID')?.value[i]?.error
                  }}</mat-error
                >
              </div>
            </ng-container>
          </section>
        </section>
        <section
          class="col-xs-12 col-sm-6 col-md-6 col-lg-6 mtop20"
          formArrayName="otherGovID">
          <!-- Other Gov IDs-->
          <section
            *ngFor="
              let id of getOtherGovIDControls();
              let i = index;
              let isLast = last
            "
            class="row">
            <ng-container [formGroupName]="i">
              <mat-select
                class="p-t-12"
                [style.width]="'40%'"
                formControlName="type"
                (change)="filterOtherGovIDs(id.value.type, i)"
                style="line-height: unset"
                placeholder="{{
                  currentLanguageSet?.ro?.otherInfo?.govtHealthProgramType
                }}">
                <mat-option
                  *ngFor="
                    let govIDType of otherGovIDMaster[i]?.otherGovIdEntityMaster
                  "
                  [value]="govIDType.govtIdentityTypeID">
                  {{ govIDType.identityType }}
                </mat-option>
              </mat-select>
              <mat-form-field
                [style.width]="'35%'"
                style="line-height: unset"
                class="mleft15">
                <input
                  autocomplete="off"
                  matInput
                  placeholder="
                {{
                    currentLanguageSet?.ro?.otherInfo?.govtHealthProgramIDNumber
                  }}"
                  [readonly]="
                    otherDetailsForm.controls['otherGovID'].value[i].type ===
                    null
                  "
                  formControlName="idValue"
                  [required]="
                    otherDetailsForm.controls['otherGovID'].value[i].type !==
                    null
                  "
                  maxlength="20" />
              </mat-form-field>
              <button
                md-mini-fab
                color="warn"
                *ngIf="
                  otherDetailsForm.get('otherGovID')?.value[i]?.idValue
                    ?.length > 1 ||
                  otherDetailsForm.get('otherGovID')?.value[i].type
                "
                (click)="removeID(0, i)">
                <mat-icon
                  class="md-18"
                  aria-label="Example icon-button with a heart icon"
                  >close</mat-icon
                >
              </button>
              <span *ngIf="i < otherGovLength - 1">
                <button
                  md-mini-fab
                  color="primary"
                  *ngIf="isLast"
                  [disabled]="
                    !otherDetailsForm.controls['otherGovID'].value[i].idValue
                  "
                  (click)="addID(0, i)">
                  <mat-icon
                    class="md-18"
                    aria-label="Example icon-button with a heart icon"
                    >add</mat-icon
                  >
                </button>
              </span>
            </ng-container>
          </section>
        </section>
      </section>
      <!--ENDS-> NEW ID DETAILS for BENEFICIARY -->
    </div>
  </div>
</div>
