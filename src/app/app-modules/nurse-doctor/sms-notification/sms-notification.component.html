<section class="container-fluid">
  <!-- Title Bar -->
  <mat-toolbar>
    <span>Send Prescription to Beneficiary</span>
    <button mat-icon-button class="close-btn">
      <mat-icon>close</mat-icon>
    </button>
  </mat-toolbar>

  <!-- Dialog Content -->
  <mat-dialog-content>
    <!-- Prescription Table -->
    <div class="table-responsive">
      <table mat-table [dataSource]="data.data.prescription" class="mat-elevation-z4">

        <!-- Prescription ID -->
        <ng-container matColumnDef="prescriptionID">
          <th mat-header-cell *matHeaderCellDef> Prescription ID </th>
          <td mat-cell *matCellDef="let prescription"> {{ prescription.prescriptionID }} </td>
        </ng-container>

        <!-- Diagnosis -->
        <ng-container matColumnDef="diagnosisProvided">
          <th mat-header-cell *matHeaderCellDef> Diagnosis </th>
          <td mat-cell *matCellDef="let prescription"> {{ prescription.diagnosisProvided }} </td>
        </ng-container>

        <!-- Drug -->
        <ng-container matColumnDef="drug">
          <th mat-header-cell *matHeaderCellDef> Drug </th>
          <td mat-cell *matCellDef="let prescription">
            <div *ngFor="let p of prescription.prescribedDrugs">{{ p.drugName }}</div>
          </td>
        </ng-container>

        <!-- Strength -->
        <ng-container matColumnDef="strength">
          <th mat-header-cell *matHeaderCellDef> Strength </th>
          <td mat-cell *matCellDef="let prescription">
            <div *ngFor="let p of prescription.prescribedDrugs">{{ p.dosage }}</div>
          </td>
        </ng-container>

        <!-- Frequency -->
        <ng-container matColumnDef="frequency">
          <th mat-header-cell *matHeaderCellDef> Frequency </th>
          <td mat-cell *matCellDef="let prescription">
            <div *ngFor="let p of prescription.prescribedDrugs">{{ p.frequency }}</div>
          </td>
        </ng-container>

        <!-- No of Days -->
        <ng-container matColumnDef="noOfDays">
          <th mat-header-cell *matHeaderCellDef> No. of Days </th>
          <td mat-cell *matCellDef="let prescription">
            <div *ngFor="let p of prescription.prescribedDrugs">{{ p.noOfDays }}</div>
          </td>
        </ng-container>

        <!-- Remarks -->
        <ng-container matColumnDef="remarks">
          <th mat-header-cell *matHeaderCellDef> Remarks </th>
          <td mat-cell *matCellDef="let prescription"> {{ prescription.remarks }} </td>
        </ng-container>

        <!-- Table Header & Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>

    <!-- Pagination -->
    <mat-paginator [pageSize]="6" [pageSizeOptions]="[6, 10, 25]" showFirstLastButtons></mat-paginator>

    <!-- SMS Section -->
    <div class="sms-section">
  <mat-checkbox color="primary" [(ngModel)]="altNum" class="checkbox-align">
    {{ currentLanguageSet?.alternateNumber }}
  </mat-checkbox>

  <mat-form-field appearance="outline" *ngIf="altNum" class="w-72">
    <mat-label>{{ currentLanguageSet?.mobileNumber }}</mat-label>
    <input
      matInput
      type="text"
      required
      minlength="10"
      maxlength="10"
      [(ngModel)]="mobileNumber"
      name="mobileNumber"
      #phnNum="ngModel"
      (keyup)="mobileNum(mobileNumber)"
    />
    <mat-error *ngIf="phnNum.invalid && phnNum.touched">
      {{ currentLanguageSet?.enterTenDigitMobileNumber }}
    </mat-error>
  </mat-form-field>
</div>


    <!-- Action Buttons -->
    <div class="action-row">
      <button
        mat-raised-button
        class="send-btn"
        (click)="sendSMS(mobileNumber)"
      >
        Send SMS
      </button>
    </div>
  </mat-dialog-content>
</section>
